<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>EVERMYND</title>
<meta name="description" content="EVERMYND is developed with doctors and therapists and is grounded in psychological science." />
<style>
  :root{
    --bg:#f6efe7;
    --ink:#171a1c;
    --muted:#4d5559;
    --brand:#1d3b44;
    --line:#e6ded6;
    --radius:20px;
    --maxw:1200px;
  }
  *{box-sizing:border-box}
  html,body{
    margin:0;
    background:var(--bg);
    color:var(--ink);
    font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
  }
  img{max-width:100%;display:block}
  a{text-decoration:none}

  /* LAYOUT */
  .container{max-width:var(--maxw);margin:0 auto;padding:clamp(16px,4vw,28px)}

  /* NAV */
  .nav{display:grid;grid-template-columns:auto 1fr;align-items:center;column-gap:24px;}
  .brand{display:flex;align-items:center;gap:10px}
  .logo{width: clamp(80px, 10vw, 150px);height:auto;display:inline-block;vertical-align:middle;transition: transform .2s ease;}
  .logo:hover{ transform: translateY(-1px) }
  .navLinks{display:flex;gap:28px;align-items:center;justify-content:flex-end;flex-wrap:wrap;}
  .navLinks a{color:var(--ink);opacity:.9}
  .btn{display:inline-flex;align-items:center;gap:.6rem;background:var(--brand);color:#fff;
    padding:.9rem 1.2rem;border-radius:999px;font-weight:600;box-shadow:0 2px 0 #0c1c20}

  /* Language switch */
  .langSwitch{display:inline-flex;gap:6px;align-items:center;margin-right:6px}
  .langBtn{font:inherit;padding:.4rem .7rem;border:1px solid var(--line);background:#fff;border-radius:999px;cursor:pointer;opacity:.9}
  .langBtn.is-active{border-color:var(--brand);box-shadow:0 1px 0 #dcd3ca;opacity:1;font-weight:700}

  @media (max-width: 820px){ .navLinks{gap:20px} .btn{padding:.8rem 1.1rem} }
  @media (max-width: 640px){ .container{padding:16px} .logo{ width: clamp(72px, 22vw, 110px) } .navLinks{gap:16px} }

  /* HERO */
  .hero{display:grid;grid-template-columns:1.15fr .85fr;gap:28px;align-items:stretch;margin-top:clamp(10px,2vw,20px)}
  @media (max-width:1024px){.hero{grid-template-columns:1fr}}
  .copy{padding-right:clamp(0px,6vw,40px)}
  h1{font-size:clamp(40px,6.8vw,84px);line-height:1.02;margin:0 0 14px;letter-spacing:-.01em}
  .lead{font-size:clamp(16px,2.4vw,20px);color:var(--muted);line-height:1.5;margin:0 0 22px;max-width:42ch}

  /* CTA */
  .actions{display:flex;align-items:center;gap:14px;flex-wrap:wrap;margin-bottom:18px}
  .cta{display:inline-flex;align-items:center;gap:.8rem;padding:14px 18px;border-radius:999px;
    border:1px solid #cfc7bf;background:#fff;box-shadow:0 2px 0 #d6cdc4;color:var(--ink);font-weight:600}
  .cta .circle{
    width:36px;height:36px;border-radius:999px;
    background:var(--brand);display:grid;place-items:center;
    transition:background .2s ease, box-shadow .2s ease
  }
  .cta .circle svg{width:18px;height:18px;fill:#fff}

  /* Icon rot + „Stop“ im Call-State */
  .cta.is-talking .circle{
    background:#e53935;
    box-shadow:0 0 0 2px rgba(229,57,53,.25);
  }

  /* Voice Wave */
  .viz{display:inline-grid;grid-auto-flow:column;gap:6px;align-items:end;height:18px;margin-left:8px}
  .viz .bar{width:3px;height:6px;border-radius:999px;background:currentColor;opacity:.95}
  @keyframes beat{0%,100%{height:6px}50%{height:18px}}
  .cta.is-idle .viz .bar{animation:beat 3s ease-in-out infinite}
  .cta.is-idle .viz .bar:nth-child(odd){animation-delay:.2s}
  .cta.is-talking .viz .bar{animation:beat 1.1s ease-in-out infinite}
  .cta.is-talking .viz .bar:nth-child(2){animation-delay:.08s}
  .cta.is-talking .viz .bar:nth-child(3){animation-delay:.16s}
  .cta.is-talking .viz .bar:nth-child(4){animation-delay:.24s}
  .cta.is-talking .viz .bar:nth-child(5){animation-delay:.32s}
  .cta.is-talking .viz .bar:nth-child(6){animation-delay:.40s}

  /* Store badges */
  .badges{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  .badges img{height:44px}

  /* HERO image */
  .heroImg{position:relative;margin:0!important;border:none!important;border-radius:0!important;background:none!important;
    box-shadow:none!important;overflow:hidden!important;width:100%!important;min-height:clamp(360px,60vh,720px)!important}
  .heroImg img{width:100%!important;height:100%!important;object-fit:cover!important;border-radius:0!important}

  /* BILLBOARD */
  .billboard{position:relative;margin:0;padding:0;width:100%;overflow:hidden;border-radius:0}
  .billboard .bg{width:100%;height:min(65vh,620px);object-fit:cover;display:block;filter:saturate(1.05) contrast(1.02)}
  .billboard .overlay{background:none;}
  .billboard .copy{position:absolute;inset:0;display:grid;align-content:end;padding:clamp(18px,5vw,44px)}
  .billboard h2{font-size:clamp(36px,7vw,84px);line-height:.98;margin:0 0 8px}
  .billboard p{font-size:clamp(16px,2vw,20px);margin:0;color:var(--muted)}
  .billboard .copy{text-align:center;justify-items:center;}
  .billboard h2,
  .billboard p{color:#fff;}

  /* SECTIONS */
  .section{padding:clamp(28px,6vw,56px) 0}
  .kicker{font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:var(--brand);font-size:.9rem;margin:0 0 6px}
  .h2{font-size:clamp(28px,4.6vw,44px);line-height:1.1;margin:0 0 10px}
  .sub{color:var(--muted);max-width:70ch;margin:0 0 24px}

  .features{
    display:grid;
    grid-template-columns:repeat(3, minmax(0,260px));
    gap:22px;
    margin:40px auto;
    justify-content:center;
    justify-items:center;
    text-align:center;
  }
  @media (max-width:900px){
    .features{grid-template-columns:repeat(2, minmax(0,260px));}
  }
  @media (max-width:640px){
    .features{grid-template-columns:1fr;}
  }
  .card{background:#fff;border:1px solid var(--line);border-radius:16px;padding:18px;box-shadow:0 2px 0 #e8e1d9}
  .card h3{margin:10px 0 6px;font-size:1.1rem}
  .card p{margin:0;color:var(--muted)}

  /* (Alt) howGrid – wird nicht mehr genutzt */
  .howGrid{
    display:grid;
    gap:22px;
    grid-template-columns:repeat(3, minmax(0,260px));
    justify-content:center;
    justify-items:center;
    text-align:center;
  }
  @media (max-width:900px){
    .howGrid{grid-template-columns:repeat(2, minmax(0,260px));}
  }
  @media (max-width:640px){
    .howGrid{grid-template-columns:1fr;}
  }
  #how .kicker,
  #how .h2{text-align:center;}

  /* NEW: HOW IT WORKS – iOS Style Cards */
  .howSection{background:#f3ebe1;}
  .howInner{max-width:900px;margin:0 auto;text-align:center;}
  .howInner .kicker{margin-bottom:4px;}
  .howInner .h2{margin-bottom:24px;}
  .stepGrid{display:flex;flex-direction:column;gap:18px;}
  .stepCard{
    background:#fff;
    border-radius:999px;
    border:1px solid var(--line);
    box-shadow:0 10px 24px rgba(23,26,28,.08);
    padding:18px 20px;
    display:flex;
    align-items:center;
    gap:16px;
  }
  .stepNumber{
    width:34px;height:34px;border-radius:999px;
    background:rgba(29,59,68,.06);
    color:var(--brand);font-weight:700;font-size:.95rem;
    display:grid;place-items:center;flex-shrink:0;
  }
  .stepText h3{margin:0 0 4px;font-size:1.1rem;}
  .stepText p{margin:0;color:var(--muted);font-size:.98rem;}

  @media (min-width:900px){
    .stepGrid{
      display:grid;
      grid-template-columns:repeat(3, minmax(0,1fr));
      gap:20px;
    }
    .stepCard{
      flex-direction:column;
      align-items:flex-start;
      text-align:left;
      border-radius:24px;
      padding:20px 22px 22px;
    }
    .stepNumber{margin-bottom:6px;}
  }

/* INVERSE WAITLIST */
.section--inverse{
  background:#1d3b44;        /* ← Neue Farbe */
  color:#fff;
  border-top:1px solid rgba(255,255,255,0.15);
  border-bottom:1px solid rgba(255,255,255,0.15);
  display:flex;
}
  .section--inverse > .container{margin:auto;}
  .section--inverse .waitlist{
    background:transparent;
    border:1px solid rgba(255,255,255,.15);
    box-shadow:none;
    border-radius:20px;
    padding:48px 24px;
    text-align:center;
  }
  .section--inverse .h2,
  .section--inverse .sub{color:#fff}
  .section--inverse .sub{opacity:.85}
  .section--inverse .field{display:flex;justify-content:center;gap:12px;flex-wrap:wrap;margin-top:16px}
  .section--inverse .field input[type="email"]{
    padding:14px 18px;
    border:1px solid rgba(255,255,255,.25);
    border-radius:999px;
    min-width:280px;
    font-size:1rem;
    background:transparent;
    color:#fff;
  }
  .section--inverse .field input[type="email"]::placeholder{color:rgba(255,255,255,.6)}
  .section--inverse .btn{
    background:#fff;
    color:var(--ink);
    box-shadow:0 2px 0 #d6cdc4;
    border:1px solid #cfc7bf;
  }

  /* NEGATIVE FACT BLOCK */
  .section--negative{
    background:#1d3b44;
    color:#fff;
    padding:clamp(48px,8vw,96px) 0;
    text-align:center;
    border-top:1px solid rgba(255,255,255,0.05);
    border-bottom:1px solid rgba(255,255,255,0.05);
  }
  .section--negative h2{
    font-size:clamp(28px,4.8vw,48px);
    line-height:1.15;
    margin:0 0 16px;
    letter-spacing:-0.01em;
    font-weight:700;
  }
  .section--negative p{
    font-size:clamp(16px,2.2vw,20px);
    opacity:.85;
    max-width:60ch;
    margin:0 auto;
  }

  footer{color:var(--muted);text-align:center;padding:48px 0}
</style>
</head>
<body>
<header class="container nav">
  <div class="brand">
    <img src="/public/logo.png" alt="Evermind logo" class="logo">
  </div>
  <nav class="navLinks">
    <a href="#how"
       data-en="How it works"
       data-de="So funktioniert es">How it works</a>
    <a href="#features"
       data-en="Features"
       data-de="Funktionen">Features</a>
    <div class="langSwitch">
      <button type="button" data-lang="en" class="langBtn is-active">EN</button>
      <button type="button" data-lang="de" class="langBtn">DE</button>
    </div>
  </nav>
</header>

<main class="container">
  <section class="hero" aria-labelledby="h1">
    <div class="copy">
      <h1 id="h1"
          data-en="The Voice<br>that cares"
          data-de="Die Stimme,<br>die dich versteht">
        The Voice<br>that cares
      </h1>
      <p class="lead"
         data-en="EVERMYND isn’t just another chat bot. It’s developed with doctors and therapists and is trained on evidence-based methods, tested for real impact."
         data-de="EVERMYND wird von Ärzt:innen und Therapeut:innen auf evidenzbasierten Methoden trainiert – für spürbare Wirkung im Alltag.">
        EVERMYND isn’t just another chat bot. It’s developed with clinicians and therapists and is trained on evidence-based methods, tested for real impact.
      </p>
      <div class="actions">
        <a
          class="cta is-idle"
          id="talkBtn"
          href="#"
          aria-label="Let's talk"
          aria-pressed="false"
          data-label-start="Let’s talk"
          data-label-connecting="Connecting…"
          data-label-talking="Talking…"
          data-label-stop="Stop"
        >
          <span class="label">Let’s talk</span>
          <span class="circle" aria-hidden="true">
            <svg viewBox="0 0 24 24" width="18" height="18">
              <path d="M21 15.46V19a2 2 0 0 1-2.18 2A19.79 19.79 0 0 1 3 5.18 2 2 0 0 1 5 3h3.54a2 2 0 0 1 2 1.72l.3 2a2 2 0 0 1-.57 1.73l-1.2 1.2a16 16 0 0 0 6.45 6.45l1.2-1.2a2 2 0 0 1 1.73-.57l2 .3A2 2 0 0 1 21 15.46Z" fill="#fff"/>
            </svg>
          </span>
          <span class="viz" aria-hidden="true">
            <span class="bar"></span><span class="bar"></span><span class="bar"></span>
            <span class="bar"></span><span class="bar"></span><span class="bar"></span>
          </span>
        </a>
      </div>
      <div class="badges">
        <a href="#"><img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="App Store"></a>
        <a href="#"><img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" alt="Google Play"></a>
      </div>
    </div>
    <figure class="heroImg">
      <img src="/public/hero2.png" alt="Listening outdoors">
    </figure>
  </section>
</main>

<!-- NEGATIVE FACT BLOCK: direkt nach dem Hero -->
<section class="section section--negative">
  <div class="container">
    <h2
      data-en="1 in 4 people worldwide struggle with their mental health."
      data-de="1/4 der Menschen weltweit kämpfen mit mentalen Belastungen.">
      1 in 4 people worldwide struggle with their mental health.
    </h2>
    <p
      data-en="EVERMYND is built for the space between therapy sessions, waiting lists and late-night overthinking."
      data-de="EVERMYND ist ideal zwischen Therapiesitzungen und für späte Grübel-Nächte.">
      No one should have to navigate that alone — EVERMYND is built for the space between therapy sessions, waiting lists and late-night overthinking.
    </p>
  </div>
</section>

<!-- 6 Feature-Cards -->
<div id="features" class="features">
  <!-- 1: Talk, don’t type -->
  <article class="card">
    <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
         viewBox="0 0 24 24" fill="none" stroke="currentColor"
         stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <path d="M2 10v3"></path>
      <path d="M6 6v11"></path>
      <path d="M10 3v18"></path>
      <path d="M14 8v7"></path>
      <path d="M18 5v13"></path>
      <path d="M22 10v3"></path>
    </svg>
    <h3 data-en="Talk or type."
        data-de="Sprechen oder tippen.">Talk or type.</h3>
    <p data-en="Speak naturally — EVERMYND listens, responds, and helps you process what’s on your mind."
       data-de="Sprich es aus – EVERMYND hört zu, reagiert und hilft dir, deine Gedanken zu sortieren.">
      Speak naturally — EVERMYND listens, responds, and helps you process what’s on your mind.
    </p>
  </article>

  <!-- 2: Feel lighter in minutes -->
  <article class="card">
    <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
         viewBox="0 0 24 24" fill="none" stroke="currentColor"
         stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <circle cx="12" cy="12" r="4"></circle>
      <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"></path>
    </svg>
    <h3 data-en="Feel better in minutes."
        data-de="Fühl dich in wenigen Minuten besser.">Feel better in minutes.</h3>
    <p data-en="Short 2–5 min micro-dialogues that bring clarity and calm, whenever you need them."
       data-de="Kurze 2–5-Minuten-Dialoge bringen Klarheit und Ruhe – genau dann, wenn du sie brauchst.">
      Short 2–5 min micro-dialogues that bring clarity and calm, whenever you need them.
    </p>
  </article>

  <!-- 3: Built with clinicians -->
  <article class="card">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
         viewBox="0 0 24 24" fill="none" stroke="currentColor"
         stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
         class="lucide lucide-stethoscope-icon lucide-stethoscope">
      <path d="M11 2v2"/><path d="M5 2v2"/><path d="M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1"/>
      <path d="M8 15a6 6 0 0 0 12 0v-3"/><circle cx="20" cy="10" r="2"/>
    </svg>
    <h3 data-en="Built with clinicians."
        data-de="Von Psychiater:innen entwickelt.">Built with clinicians.</h3>
    <p data-en="Every conversation is grounded in proven psychological methods — CBT, ACT, mindfulness."
       data-de="Jedes Gespräch basiert auf erprobten psychologischen Methoden – CBT, ACT und Achtsamkeit.">
      Every conversation is grounded in proven psychological methods — CBT, ACT, mindfulness.
    </p>
  </article>

  <!-- 4: Your data stays yours -->
  <article class="card">
    <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
         viewBox="0 0 24 24" fill="none" stroke="currentColor"
         stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <path d="M12 22C7 20.5 4 17 4 12V6l8-4 8 4v6c0 5-3 8.5-8 10z"></path>
      <path d="m9 12 2 2 4-4"></path>
    </svg>
    <h3 data-en="Your data is 100% safe"
        data-de="Deine Daten sind zu 100&nbsp;% sicher.">Your data is 100% safe</h3>
    <p data-en="Fully hosted in the EU, encrypted end-to-end, never sold or shared — privacy by design."
       data-de="Komplett in der EU gehostet, Ende-zu-Ende verschlüsselt – Privacy by Design.">
      Fully hosted in the EU, encrypted end-to-end — privacy by design.
    </p>
  </article>

  <!-- 5: Always there, never judging -->
  <article class="card">
    <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
         viewBox="0 0 24 24" fill="none" stroke="currentColor"
         stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <path d="M20.8 4.6a5.5 5.5 0 0 0-7.8 0L12 5.6l-1-1a5.5 5.5 0 1 0-7.8 7.8l1 1L12 21l7.8-7.6 1-1a5.5 5.5 0 0 0 0-7.8z"></path>
    </svg>
    <h3 data-en="Always there, never judging."
        data-de="Immer da, nie wertend.">Always there, never judging.</h3>
    <p data-en="24/7 companion that’s available any time — no appointments, no waiting lists."
       data-de="24/7-Begleiter – ohne Termine, ohne Warteschleifen, ohne Bewertung.">
      24/7 companion that’s available any time — no appointments, no waiting lists.
    </p>
  </article>

  <!-- 6: Small habits, real change -->
  <article class="card">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
         viewBox="0 0 24 24" fill="none" stroke="currentColor"
         stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
         class="lucide lucide-person-standing-icon lucide-person-standing">
      <circle cx="12" cy="5" r="1"/><path d="m9 20 3-6 3 6"/><path d="m6 8 6 2 6-2"/><path d="M12 10v4"/>
    </svg>
    <h3 data-en="Small habits, big change."
        data-de="Kleine Schritte, große Wirkung.">Small habits, big change.</h3>
    <p data-en="Daily reflections and voice-based routines that build lasting emotional resilience."
       data-de="Tägliche Reflexionen stärken deine emotionale Resilienz.">
      Daily reflections and voice-based routines that build lasting emotional resilience.
    </p>
  </article>
</div>

<!-- Billboard -->
<section class="billboard" aria-labelledby="bb1">
  <img class="bg" src="/public/billboard1.jpg" alt="Morning light and calm scene">
  <div class="overlay"></div>
  <div class="copy container">
    <h2 id="bb1"
        data-en="A clinically grounded voice-first AI companion for mental wellbeing, hosted in the EU."
        data-de="Eine klinisch fundierte, sprachbasierte KI-Begleitung für mentale Gesundheit – gehostet in der EU.">
      A clinically grounded voice-first AI companion
      for mental wellbeing, hosted in the EU.
    </h2>
    <p data-en="Talk to EVERMYND while riding your bike, on a walk, or on your way to work."
       data-de="Sprich mit EVERMYND – auf dem Weg zur Arbeit, auf der Couch oder beim Radfahren.">
      Talk to EVERMYND and feel better.
    </p>
  </div>
</section>

<!-- NEW HOW IT WORKS – iOS STYLE -->
<section class="section howSection" id="how" aria-labelledby="how-h">
  <div class="container howInner">
    <p class="kicker"
       data-en="How it works"
       data-de="So funktioniert es">How it works</p>

    <h2 id="how-h" class="h2"
        data-en="Three simple steps to feel better"
        data-de="Drei einfache Schritte, um dich besser zu fühlen">
      Three simple steps to feel better
    </h2>

    <div class="stepGrid">
      <article class="stepCard">
        <div class="stepNumber">1</div>
        <div class="stepText">
          <h3 data-en="Talk" data-de="Sprechen">Talk</h3>
          <p data-en="Start a short voice chat whenever you need to clear your mind."
             data-de="Starte einen kurzen Voice-Chat, wann immer du den Kopf frei bekommen möchtest.">
            Start a short voice chat whenever you need to clear your mind.
          </p>
        </div>
      </article>

      <article class="stepCard">
        <div class="stepNumber">2</div>
        <div class="stepText">
          <h3 data-en="Reflect" data-de="Reflektieren">Reflect</h3>
          <p data-en="EVERMYND helps you make sense of what you feel—without judgment."
             data-de="EVERMYND hilft dir, deine Gefühle zu sortieren – ohne zu urteilen.">
            EVERMYND helps you make sense of what you feel—without judgment.
          </p>
        </div>
      </article>

      <article class="stepCard">
        <div class="stepNumber">3</div>
        <div class="stepText">
          <h3 data-en="Grow" data-de="Wachsen">Grow</h3>
          <p data-en="Build daily voice routines that strengthen your emotional resilience."
             data-de="Baue tägliche Sprach-Routinen auf, die deine emotionale Resilienz stärken.">
            Build daily voice routines that strengthen your emotional resilience.
          </p>
        </div>
      </article>
    </div>
  </div>
</section>

<section class="section section--inverse" id="waitlist">
  <div class="container">
    <div class="waitlist" aria-labelledby="wl-h">
      <h2 id="wl-h" class="h2"
          data-en="TRY EVERMYND"
          data-de="TESTE EVERMYND">Try EVERMYND</h2>
      <p class="sub"
         data-en="Join early-access list and get notified when we go live."
         data-de="Trag dich in die Early-Access-Liste ein und bleibe informiert.">
        Join early-access list and get notified when we go live.
      </p>
      <form action="https://formspree.io/f/your-form-id" method="POST" class="field">
        <input type="email" name="email"
               required aria-label="Email address"
               data-en-placeholder="Enter your email"
               data-de-placeholder="E-Mail-Adresse eingeben"
               placeholder="Enter your email">
        <button type="submit" class="btn"
                data-en="Join Waitlist"
                data-de="Zur Warteliste">
          Join Waitlist
        </button>
      </form>
    </div>
  </div>
</section>

<footer class="container">
  <p data-en="© 2025 EVERMYND All rights reserved."
     data-de="© 2025 EVERMYND Alle Rechte vorbehalten.">
    © 2025 EVERMYND All rights reserved.
  </p>
  <p>
    <a href="#"
       data-en="Privacy Policy"
       data-de="Datenschutz">Privacy Policy</a>
    ·
    <a href="#"
       data-en="Imprint"
       data-de="Impressum">Imprint</a>
  </p>
</footer>

<!-- ELEVENLABS: Start/Stop + Button-States -->
<script type="module">
  const AGENT_ID = "agent_2901kbdbjpv4eb7rsbr1p21mzg0z";
  const talkBtn = document.getElementById('talkBtn');

  let Conversation = null;
  let convo = null;
  let running = false;
  let micStream = null;
  let isEnding = false;

  const L = (key, fallback) => talkBtn?.dataset[key] || fallback;

  function setLabel(txt){
    const lab = talkBtn?.querySelector('.label');
    if(lab) lab.textContent = txt;
  }

  function setIdle(){
    talkBtn.classList.add('is-idle');
    talkBtn.classList.remove('is-talking');
    talkBtn.setAttribute('aria-pressed','false');
    running = false;
    setLabel(L('labelStart','Let’s talk'));
  }

  function setTalkingStateConnecting(){
    talkBtn.classList.remove('is-idle');
    talkBtn.classList.add('is-talking');
    talkBtn.setAttribute('aria-pressed','true');
    setLabel(L('labelConnecting','Connecting…'));
  }

  function setTalkingStateActive(){
    talkBtn.classList.remove('is-idle');
    talkBtn.classList.add('is-talking');
    talkBtn.setAttribute('aria-pressed','true');
    setLabel(L('labelStop','Stop'));
  }

  async function ensureSdk(){
    if(Conversation) return Conversation;
    const m = await import('https://cdn.jsdelivr.net/npm/@elevenlabs/client/+esm');
    Conversation = m.Conversation;
    return Conversation;
  }

  // SDK beim Laden vorladen
  ensureSdk().catch(err => console.warn('[EL] preload failed', err));

  async function startConversation(){
    if(running) return;
    console.log('[EL] startConversation');
    running = true;
    setTalkingStateConnecting();

    try {
      micStream = await navigator.mediaDevices.getUserMedia({ audio:true });
      console.log('[EL] mic acquired');
    } catch(e){
      console.warn('[EL] mic error', e);
      running = false;
      setIdle();
      return;
    }

    try { await ensureSdk(); }
    catch(e){
      console.warn('[EL] SDK load error', e);
      running = false;
      setIdle();
      stopMic();
      return;
    }

    try{
      convo = await Conversation.startSession({
        agentId: AGENT_ID,
        connectionType: 'webrtc',
        onStatusChange: (s)=>{
          console.log('[EL] status:', s);
          if(s === 'connected'){
            setTalkingStateActive();
          }
          if(s === 'disconnected'){
            endConversation({remote:true});
          }
        },
        onError: (err)=> {
          console.warn('[EL] onError', err);
          endConversation({error:true});
        }
      });
      console.log('[EL] session started', convo);
    }catch(e){
      console.warn('[EL] startSession error', e);
      running = false;
      setIdle();
      stopMic();
    }
  }

  function stopMic(){
    try{ micStream?.getTracks?.().forEach(t=>t.stop()); }catch(_){}
    micStream = null;
  }

  function stopPeerConnections(){
    try{
      if(convo?.pc?.getSenders){ convo.pc.getSenders().forEach(s=>{ try{s.track?.stop();}catch(_){}}); }
      if(convo?.pc?.getReceivers){ convo.pc.getReceivers().forEach(r=>{ try{r.track?.stop();}catch(_){}}); }
      if(convo?.pc?.close){ convo.pc.close(); }
    }catch(_){}
  }

  function stopAudioTags(){
    try{
      document.querySelectorAll('audio').forEach(a=>{
        try{ a.pause(); a.srcObject = null; a.removeAttribute('src'); }catch(_){}
      });
    }catch(_){}
  }

  async function tryEndAll(){
    const calls = [
      async()=>await convo?.endSession?.(),
      async()=>await Conversation?.endSession?.(convo?.sessionId),
      async()=>await convo?.disconnect?.(),
      async()=>await convo?.close?.(),
      async()=>await convo?.stop?.(),
      async()=>await convo?.end?.(),
    ];
    for(const fn of calls){
      try{ await fn?.(); }catch(_){}
    }
  }

  async function endConversation(opts={}){
    if(!running && !convo) return;
    if(isEnding) return;
    isEnding = true;
    console.log('[EL] endConversation', opts);

    try{ await tryEndAll(); }catch(_){}

    stopPeerConnections();
    stopAudioTags();
    stopMic();

    convo = null;
    running = false;
    setIdle();

    setTimeout(()=>{
      const anyPlaying = Array.from(document.querySelectorAll('audio'))
        .some(a=>!a.paused && !a.ended);
      if(anyPlaying){
        console.warn('[EL] hard-stop fallback');
        stopAudioTags();
        stopPeerConnections();
        stopMic();
      }
      isEnding = false;
    }, 600);
  }

  talkBtn?.addEventListener('click', (e)=>{
    e.preventDefault();
    if(running || convo){
      endConversation({manual:true});
    } else {
      startConversation();
    }
  });

  window.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape' && (running || convo)) endConversation({escape:true});
  });

  window.addEventListener('beforeunload', ()=>{
    try{ endConversation({unload:true}); }catch(_){}
  });

  setIdle();
</script>

<!-- Language-Logik mit Text-Umschaltung -->
<script>
  function applyLang(lang){
    document.documentElement.lang = lang;

    // Language buttons
    document.querySelectorAll('.langBtn').forEach(b=>{
      b.classList.toggle('is-active', b.dataset.lang === lang);
    });

    // Texte mit data-en / data-de
    document.querySelectorAll('[data-en]').forEach(el=>{
      const html = el.getAttribute(lang === 'de' ? 'data-de' : 'data-en');
      if(html !== null){
        el.innerHTML = html;
      }
    });

    // Placeholder
    document.querySelectorAll('[data-en-placeholder]').forEach(el=>{
      const val = el.getAttribute(lang === 'de' ? 'data-de-placeholder' : 'data-en-placeholder');
      if(val !== null){
        el.placeholder = val;
      }
    });

    // Talk-Button Texte
    const talkBtn = document.getElementById('talkBtn');
    if(talkBtn){
      const lab = talkBtn.querySelector('.label');
      if(lang === 'de'){
        talkBtn.dataset.labelStart      = "Lass uns sprechen";
        talkBtn.dataset.labelConnecting = "Verbinde…";
        talkBtn.dataset.labelTalking    = "Wir sprechen…";
        talkBtn.dataset.labelStop       = "Stopp";
        if(lab) lab.textContent = "Lass uns sprechen";
      } else {
        talkBtn.dataset.labelStart      = "Let’s talk";
        talkBtn.dataset.labelConnecting = "Connecting…";
        talkBtn.dataset.labelTalking    = "Talking…";
        talkBtn.dataset.labelStop       = "Stop";
        if(lab) lab.textContent = "Let’s talk";
      }
    }
  }

  document.querySelectorAll('.langBtn').forEach(btn=>{
    btn.addEventListener('click', ()=>applyLang(btn.dataset.lang));
  });

  // Startsprache
  applyLang('en');
</script>
</body>
</html>
